<psk-page title="Seed class">
    <psk-toc title="In this section"></psk-toc>
    <psk-chapter title="Overview">
        <psk-highlight type-of-highlight="note">
            The <code>Seed</code> class encapsulates the concept of SEED and provides methods for creating and manipulating SEEDs.
            A <code>SEED</code> and has two roles: provides a unique identifier for locating a Brick Archive's bar map, stored  as brick in Brick Storage
            and provides a cryptographic key for encrypting and decrypting the bar map.
            A SEED's internal structure is an object with two keys: <code>key</code> and <code>endpoint</code>.
        </psk-highlight>
         <psk-list list-type="unordered">
                <code><b>key</b></code>
                    A random bytes <code>Buffer</code> of length 32.
                <code><b>endpoint</b></code>
                    The address of the Brick Storage that stores the brick that contains the Brick Archive's bar map. The brick that stores the
                    Brick Archive's bar map is found at the URL <code>endpoint/hash(key)</code>.
            </psk-list>
    </psk-chapter>
    <psk-chapter title="Seed class methods">
        <psk-card title="constructor">
                The Seed class' constructor generates a Seed instance from a previously generated Seed's compact form
                or from a provided endpoint and/or id. In case a compact form SEED is not provided, specifying the endpoint is
                mandatory. If only the endpoint is provided, the key is generated by the Seed class using the <code>randomBytes</code>
                function from the <code>crypto</code> module. The Seed's class constructor can be called with two distinct ways, as follows:
            <psk-card title="Syntax">
                <psk-code language="JavaScript">
                    Seed(compactSeed);
                </psk-code>
                <psk-card title="Parameters">
                     <psk-list list-type="unordered">
                         <code><b>compactSeed</b></code>
                             The <code>compact form</code> of a previously generated SEED. A SEED's <code>compact form</code>
                             is a <code>string</code> resulted by the concatenation of the <code>base58</code> encoded
                             <code>key</code> and the <code>base58</code> encoded endpoint separated by the character
                             <code>|</code>
                     </psk-list>
                </psk-card>
            </psk-card>

            <psk-card title="Syntax">
                <psk-code language="JavaScript">
                    Seed(endpoint [, key]);
                </psk-code>
                <psk-card title="Parameters">
                    <psk-list list-type="unordered">
                        <code><b>endpoint</b></code>
                            The address of the Brick Storage that stores the brick that contains the Brick Archive's bar map.<br><br>
                        <code><b>key</b></code> <b>|</b> Optional
                            A 32 bytes long <code>Buffer</code>. If not provided, a key is generated inside the Seed class.
                    </psk-list>
                </psk-card>
            </psk-card>
        </psk-card>
        <psk-card title="getCompactForm">
                Returns the Seed's <code>compact form</code>. A SEED's <code>compact form</code>
                is a <code>string</code> resulted by the concatenation of the <code>base58</code> encoded
                <code>key</code> and the <code>base58</code> encoded endpoint separated by the character
                <code>|</code>. In other words:
            <psk-code language="JavaScript">
                compactForm = base58.encode(key) + "|" + base58.encode(endpoint);
            </psk-code>
            <psk-card title="Syntax">
                <psk-code language="JavaScript">
                    getCompactForm();
                </psk-code>
            </psk-card>
        </psk-card>
        <psk-card title="getAnchorURL">
               Returns a string representing the URL where the brick that stores the Brick Archive's bar map is found. The
                URL has the format <code>endpoint/hash(key)</code> where <code>hash</code> is a hashing function.
            <psk-card title="Syntax">
                <psk-code language="JavaScript">
                    getAnchorURL();
                </psk-code>
            </psk-card>
        </psk-card>
        <psk-card title="getEndpoint">
                Returns the Seed's endpoint.
            <psk-card title="Syntax">
                <psk-code language="JavaScript">
                    getEndpoint();
                </psk-code>
            </psk-card>
        </psk-card>
        </psk-card>
        <psk-card title="getEncryptionKey">
                Returns a <code>Buffer</code> used for encrypting/decrypting the Brick Archive's bar map. The cryptographic
                key is generated applying the <code>pbkdf2</code> key derivation function on the Seed's <code>compact form</code>. In other words,
            <psk-code language="JavaScript">
                encryptionKey = pbkdf2(compactForm);
            </psk-code>
            <psk-card title="Syntax">
                <psk-code language="JavaScript">
                    getEncryptionKey([algorithm]);
                </psk-code>
                <psk-card title="Parameters">
                    <psk-list list-type="unordered">
                        <code><b>algorithm</b></code> <b>|</b> Optional
                            A string representing the encryption algorithm's name as defined in <code>Open SSL</code>.
                            Based on the provided <code>algorithm</code> the encryption key's length is determined. For example, if
                            the provided encryption algorithm is <code>aes-256-ofb</code>, then the key's length is 256 bits (32 bytes). If the
                                provided encryption algorithm is <code>aes-192-gcm</code> then the key is 192 bits (24 bytes) long. If no algorithm
                            is provided, then, by default, the <code>aes-256-gcm</code> algorithm is used and, thus, a 32 bytes long encryption key
                            is generated.
                    </psk-list>
                </psk-card>
            </psk-card>
        </psk-card>
        </psk-card>

    </psk-chapter>
</psk-page>