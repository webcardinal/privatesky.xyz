<head>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
				new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NW4R664');</script>
	<!-- End Google Tag Manager -->
</head>

<psk-page title="How to create a new site using Cardinal.Js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NW4R664"
					  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->

	<psk-toc title="Table of contents"></psk-toc>

	<psk-dscription title="Summary">
		<p>This guide will provide the necessary information on how to create a new website using Cardinal.Js framework.</p>
	</psk-dscription>

	<psk-chapter title="Prerequisites">
		<psk-list list-type="ordered">
			Install or update <a href="https://nodejs.org/en/">Node</a> (including NPM) to version <b>12.14.0</b>.
			Install or update <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a>
		</psk-list>
	</psk-chapter>

	<psk-chapter title="Creating the folder structure">
		<psk-card>
			<p>Start by cloning the <a href="https://github.com/privatesky/cardinal-app-template" target="_blank">cardinal-app-template</a> repository.</p>
			<psk-code>
				git clone https://github.com/privatesky/cardinal-app-template web-site
			</psk-code>

			<p>Next, go ahead and remove the existing <code>.git</code> folder from your <code>web-site</code> folder, initialize a new empty git repo and commit the existing content to your own repository.</p>

			<psk-code language="bash">
				cd web-site
				rm -rf .git
				git init

				# set the url of your git repository
				# replace 'https://github.com/username/web-site.git' with the your own url
				git remote add origin https://github.com/username/web-site.git
				git fetch

				git add --all
				git commit -m "first commit"

				# push the files to your git repository.
				git push --set-upstream origin master
			</psk-code>
			<p>You've just developed your new website's basic structure, using the Cardinal.Js framework.</p>
		</psk-card>
	</psk-chapter>

	<psk-chapter title="Installing dependencies">
		The install script will make use of <psk-link tag="octopus">Octopus</psk-link> which will install the latest <psk-link tag="cardinal-mvc">Cardinal</psk-link> version and the <psk-link tag="themes">app theme</psk-link> from their repositories.
		<psk-code language="bash">
			npm install
		</psk-code>
	</psk-chapter>

	<psk-chapter title="Running the website locally">
		To run the website you just created execute the command
		<psk-code language="bash">
			npm run web
		</psk-code>
		Upon the start of the web server, go to the browser and navigate to: <a href="http://localhost:8000/">http://localhost:8000/</a>
	</psk-chapter>

	<psk-chapter title="Running the website in a subfolder">
		Let's say you want to run your app with a different web server capable of serving multiple web apps.
		So, your app will be hosted in a subfolder(e.g. <i>cardinal-app</i>) and the app url will be <a href="#">http://localhost:8000/cardinal-app</a>.
		All you have to do is to add the <code>base</code> tag in your cardinal index.html file.
		<psk-code language="html">
			&lt;head&gt;
				<meta charset="UTF-8"/>
				<meta http-equiv="x-ua-compatible" content="IE=Edge"/>
				<base href="/cardinal-app/"/>
			&lt;/head&gt;
		</psk-code>
		Make sure that your web-server is properly configured to handle SPA routes. If you're not sure, or you can't configure your web-server, set
		the <code>historyType="query"</code> in your <code>menu.json</code> file.
		<psk-code language="json">
		    "defaultMenuConfig": {
            "icon": "fa-bars",
            "type": "route",
            "component": "psk-page-loader",
            "exact": true,
            "indexed": true,
            "pagePrefix": "?",
            "historyType": "query"
        },
		</psk-code>
	</psk-chapter>

	<psk-chapter title="Update Cardinal.Js framework">
		<p>To update the instance of Cardinal.Js framework used, you must be within the web-site root folder and to execute the command:</p>
		<psk-code language="bash">
			npm run update
		</psk-code>
	</psk-chapter>

	<psk-chapter title="How to add a new page">
		<p>To add a Hello-world page to the website follow the steps:</p>
		<psk-list list-type="ordered">
			Navigate to <code>web-site/pages</code> folder
				<psk-code language="bash">
					cd web-site/pages
				</psk-code>
			create a new html file called <code>hello-world.html</code>
			Open <code>hello-world.html</code> file and add the following code as content:
				<psk-code language="html">
					<psk-page title="Hello world!">
					</psk-page>
				</psk-code>
			Navigate back to web-site root folder and edit <code>menu.json</code> file in order to add a new entry for the hello-world page into the menu configuration.
				<psk-code language="JavaScript">
					{
						"defaultMenuConfig": {
							"icon": "fa-bars",
							"type": "route",
							"component": "psk-page-loader",
							"exact": true,
							"404": "/pages/404.html"
						},
						"pages": [
							{
								"name": "Home",
								"path": "/home",
								"icon": "fa-home",
								"pageSrc": "home.html"
							},
							{
								"name": "Hello World",
								"path": "/hello-world",
								"pageSrc": "hello-world.html"
							}
						]
					}
				</psk-code>
			Open the browser and navigate to <a href="http://localhost:8000/">http://localhost:8000</a> and check the new menu item.
		</psk-list>
	</psk-chapter>
	<psk-chapter title="Develop the website">
		To learn how to develop the website more check <psk-link tag="cardinal-mvc">Cardinal.Js documentation page</psk-link>
	</psk-chapter>
</psk-page>
